import Http from "std:net"

async fn main(): void {
    print("Testing HTTP module...")

    // Test 1: POST request with body and headers
    let body = { "name": "Carlos" }
    let headers = { "Authorization": "Bearer token123" }
    let res = await Http.post("https://httpbin.org/post", body, headers)

    if (res.status == 200) {
        print("✓ POST request successful!")
        print("  Status:", res.status)
        print("  Status Text:", res.statusText)
    }

    // Test 2: Simple GET request
    let getRes = await Http.get("https://httpbin.org/get")
    if (getRes.status == 200) {
        print("✓ GET request successful!")
        print("  Status:", getRes.status)
    }

    // Test 3: Check helper function
    if (Http.isOk(res)) {
        print("✓ isOk() helper works correctly")
    }

    // Test 4: String literals as object keys
    let data = {
        "name": "Carlos",
        "age": 25,
        "Content-Type": "application/json"
    }
    print("✓ Object with string literal keys:", data)

    print("\nAll tests passed!")
}

await main()
