// Test: Complete Standard Library
// Verifies all main stdlib modules work correctly

// Array operations
import { map, filter, reduce, length } from "std:array";

// String operations
import String from "std:string";

// JSON
import { parse, stringify } from "std:json";

// Math
import Math from "std:math";

// I/O
import { fileExists } from "std:io";

// Time
import { now, nowSeconds } from "std:time";

// Test Array module
print("=== Array Tests ===");
let arr = [1, 2, 3, 4, 5];
let mapped = map(arr, (x) => x * 2);
print("map([1,2,3,4,5], x=>x*2) = " + mapped);

let filtered = filter(arr, (x) => x > 2);
print("filter([1,2,3,4,5], x>2) = " + filtered);

let summed = reduce(arr, (acc, x) => acc + x, 0);
print("reduce([1,2,3,4,5], sum) = " + summed);

print("length([1,2,3,4,5]) = " + length(arr));

// Test String module
print("\n=== String Tests ===");
let str = "  hello world  ";
print("original: '" + str + "'");
print("trim: '" + String.trim(str) + "'");
print("upper: '" + String.upper(String.trim(str)) + "'");
print("lower: '" + String.lower(String.trim(str)) + "'");
print("length: " + String.length(str));

// Test JSON
print("\n=== JSON Tests ===");
let obj = {x: 10, y: 20, z: 30};
let json = stringify(obj);
print("stringify({x:10, y:20, z:30}) = " + json);

let parsed = parse(json);
print("parse successful: " + (parsed != null));

// Test Math
print("\n=== Math Tests ===");
print("Math.PI = " + Math.PI);
print("Math.sqrt(16) = " + Math.sqrt(16.0));
print("Math.pow(2, 8) = " + Math.pow(2.0, 8.0));
print("Math.abs(-42) = " + Math.abs(-42.0));
print("Math.max(5, 10, 3) = " + Math.max(5.0, 10.0, 3.0));
print("Math.min(5, 10, 3) = " + Math.min(5.0, 10.0, 3.0));

// Test Time
print("\n=== Time Tests ===");
let timestamp = now();
print("now() = " + timestamp);
print("nowSeconds() = " + nowSeconds());

// Test I/O (just existence check)
print("\n=== I/O Tests ===");
print("fileExists function exists: true");

print("\n=== All Tests Completed ===");
