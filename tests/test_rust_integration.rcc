// Example: Using Rust modules from Raccoon
// This demonstrates how to write Rust code and call it from Raccoon

// Step 1: Import the Rust module (will be auto-compiled)
// The runtime will:
// 1. Find examples/my_functions.rs.rcc
// 2. Compile it with rustc to a .dll/.so
// 3. Load it with libloading
// 4. Make functions available

// For now, since the system is being developed, we'll use the manually
// registered functions from rust_ffi_modules.rs

// But the VISION is:
// import { rust_add_pure, rust_is_prime_pure } from "examples/my_functions.rs.rcc"

// And it would work automatically!

// ===========================================================================
// CURRENT SYSTEM: Use the FFI functions
// ===========================================================================

fn demonstrateCurrentFFI() {
    print("=== Current FFI System ===")
    print("These functions are defined in src/runtime/rust_ffi_modules.rs")
    print("They use automatic type conversion")
    print("")
    
    let sum = rust_add(100, 200)
    print("rust_add(100, 200) =", sum)
    
    let isPrime = rust_is_prime(97)
    print("rust_is_prime(97) =", isPrime)
    
    let fib = rust_fibonacci(20)
    print("rust_fibonacci(20) =", fib)
}

// ===========================================================================
// FUTURE SYSTEM: Pure Rust modules
// ===========================================================================

fn demonstrateFutureSystem() {
    print("\n=== Future System (Coming Soon) ===")
    print("Write pure Rust in .rs.rcc files:")
    print("")
    print("File: my_math.rs.rcc")
    print("```rust")
    print("#[no_mangle]")
    print("pub extern \"C\" fn my_add(a: i64, b: i64) -> i64 {")
    print("    a + b")
    print("}")
    print("```")
    print("")
    print("Then in Raccoon:")
    print("```raccoon")
    print("import { my_add } from \"my_math.rs.rcc\"")
    print("let result = my_add(10, 20)")
    print("```")
    print("")
    print("âœ“ Pure Rust code")
    print("âœ“ Auto-compiled on import")
    print("âœ“ Zero boilerplate")
    print("âœ“ Full Rust ecosystem access")
}

// ===========================================================================
// ALTERNATIVE: Inline Rust decorator
// ===========================================================================

fn demonstrateInlineRust() {
    print("\n=== Alternative: @native Decorator ===")
    print("Write Rust inline in .rcc files:")
    print("")
    print("```raccoon")
    print("@native(\"\"\"")
    print("  fn custom_logic(x: i64, y: i64) -> i64 {")
    print("      // Pure Rust code here")
    print("      x.pow(y as u32)")
    print("  }")
    print("\"\"\")")
    print("fn power(x: int, y: int): int")
    print("")
    print("// Raccoon compiles the Rust code and links it")
    print("let result = power(2, 10)  // 1024")
    print("```")
}

// ===========================================================================
// Run demonstrations
// ===========================================================================

demonstrateCurrentFFI()
demonstrateFutureSystem()
demonstrateInlineRust()

print("\n" + "=".repeat(60))
print("Summary:")
print("1. âœ“ Current: Manual FFI functions in rust_ffi_modules.rs")
print("2. ðŸš§ Coming: Auto-compile .rs.rcc files")
print("3. ðŸš§ Coming: @native inline Rust decorator")
print("=".repeat(60))
