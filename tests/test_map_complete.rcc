

print("=== Map<K,V> Implementation Tests ===\n");


print("[ 1 ] Basic Map<str, int> operations:");
let m1: Map<str, int> = new Map<str, int>();
m1.set("one", 1);
m1.set("two", 2);
m1.set("three", 3);
print("  Set 3 values");
print("  Get 'one': " + (m1.get("one") ?? -1).toStr());
print("  Get 'two': " + (m1.get("two") ?? -1).toStr());
print("  Has 'one': " + m1.has("one").toStr());
print("  Has 'missing': " + m1.has("missing").toStr());
print("  Size: " + m1.size().toStr());
print("  âœ“ Test 1 passed\n");


print("[ 2 ] Map delete operation:");
let m2: Map<str, int> = new Map<str, int>();
m2.set("a", 10);
m2.set("b", 20);
m2.set("c", 30);
print("  Initial size: " + m2.size().toStr());
let deleted = m2.delete("b");
print("  Deleted 'b': " + deleted.toStr());
print("  Size after delete: " + m2.size().toStr());
print("  Has 'b': " + m2.has("b").toStr());
let notDeleted = m2.delete("xyz");
print("  Deleted non-existent 'xyz': " + notDeleted.toStr());
print("  âœ“ Test 2 passed\n");


print("[ 3 ] Map clear operation:");
let m3: Map<str, int> = new Map<str, int>();
m3.set("x", 100);
m3.set("y", 200);
m3.set("z", 300);
print("  Size before clear: " + m3.size().toStr());
m3.clear();
print("  Size after clear: " + m3.size().toStr());
print("  Has 'x': " + m3.has("x").toStr());
print("  âœ“ Test 3 passed\n");


print("[ 4 ] Map with float values:");
let mf: Map<str, float> = new Map<str, float>();
mf.set("pi", 3.14159);
mf.set("e", 2.71828);
let pi = mf.get("pi") ?? 0.0;
print("  pi = " + pi.toStr());
print("  âœ“ Test 4 passed\n");


print("[ 5 ] Map<int, str> with int keys:");
let mi: Map<int, str> = new Map<int, str>();
mi.set(1, "one");
mi.set(2, "two");
mi.set(3, "three");
print("  1 -> " + (mi.get(1) ?? "null"));
print("  2 -> " + (mi.get(2) ?? "null"));
print("  Size: " + mi.size().toStr());
print("  âœ“ Test 5 passed\n");


print("[ 6 ] Map overwrites existing values:");
let m6: Map<str, int> = new Map<str, int>();
m6.set("key", 100);
let v1 = m6.get("key") ?? 0;
print("  Initial value: " + v1.toStr());
m6.set("key", 200);
let v2 = m6.get("key") ?? 0;
print("  After overwrite: " + v2.toStr());
print("  Size (should be 1): " + m6.size().toStr());
print("  âœ“ Test 6 passed\n");


print("[ 7 ] Get non-existent key returns null:");
let m7: Map<str, int> = new Map<str, int>();
m7.set("exists", 42);
let exists = m7.get("exists");
let missing = m7.get("doesNotExist");
if (missing == null) {
    print("  Non-existent key returns null âœ“");
}
print("  âœ“ Test 7 passed\n");


print("[ 8 ] Map toStr() method:");
let m8: Map<str, int> = new Map<str, int>();
m8.set("a", 1);
m8.set("b", 2);
let str = m8.toStr();
print("  Map as string: " + str);
print("  âœ“ Test 8 passed\n");


print("[ 9 ] Map with typed integers:");
let mi32: Map<str, i32> = new Map<str, i32>();
mi32.set("value", 12345);
let vi32 = mi32.get("value") ?? 0;
print("  i32 value: " + vi32.toStr());

let mu64: Map<str, u64> = new Map<str, u64>();
mu64.set("large", 999999);
let vu64 = mu64.get("large") ?? 0;
print("  u64 value: " + vu64.toStr());
print("  âœ“ Test 9 passed\n");


print("[ 10 ] Null coalescing with Map.get():");
let m10: Map<str, int> = new Map<str, int>();
m10.set("exists", 123);
let withValue = m10.get("exists") ?? 0;
let withoutValue = m10.get("missing") ?? -1;
print("  Existing key (with ??): " + withValue.toStr());
print("  Missing key (with ??): " + withoutValue.toStr());
print("  âœ“ Test 10 passed\n");


print("[ 11 ] Complex operation sequence:");
let m11: Map<str, int> = new Map<str, int>();
m11.set("a", 1);
m11.set("b", 2);
m11.set("c", 3);
m11.set("d", 4);
m11.set("e", 5);
print("  Added 5 elements, size: " + m11.size().toStr());
m11.delete("b");
m11.delete("d");
print("  Deleted 2 elements, size: " + m11.size().toStr());
m11.set("f", 6);
print("  Added 1 more element, size: " + m11.size().toStr());
print("  Has 'a': " + m11.has("a").toStr());
print("  Has 'b': " + m11.has("b").toStr());
print("  Has 'f': " + m11.has("f").toStr());
print("  âœ“ Test 11 passed\n");


print("[ 12 ] Map with float types:");
let mf32: Map<str, f32> = new Map<str, f32>();
mf32.set("x", 1.5);
mf32.set("y", 2.5);
print("  f32 size: " + mf32.size().toStr());

let mf64: Map<str, f64> = new Map<str, f64>();
mf64.set("alpha", 3.14159);
mf64.set("beta", 2.71828);
print("  f64 size: " + mf64.size().toStr());
print("  âœ“ Test 12 passed\n");

print("==================================================");
print("âœ… ALL MAP TESTS PASSED SUCCESSFULLY!");
print("==================================================\n");

print("Types tested:");
print("  â€¢ Map<str, int>");
print("  â€¢ Map<str, float>");
print("  â€¢ Map<int, str>");
print("  â€¢ Map<str, i32>");
print("  â€¢ Map<str, u64>");
print("  â€¢ Map<str, f32>");
print("  â€¢ Map<str, f64>");

print("\nOperations tested:");
print("  â€¢ set(key, value)");
print("  â€¢ get(key) -> value?");
print("  â€¢ has(key) -> bool");
print("  â€¢ delete(key) -> bool");
print("  â€¢ clear()");
print("  â€¢ size() -> int");
print("  â€¢ toStr() -> str");

print("\nðŸŽ‰ Map<K,V> implementation working perfectly!");
