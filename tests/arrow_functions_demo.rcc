

print("=== ARROW FUNCTIONS AS PARAMETERS ===");
print("");


let numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
print("Original array:", numbers);
print("");


print("--- MAP with arrow functions ---");


let doubled = numbers.map((x) => x * 2);
print("Doubled (arrow):", doubled);


let squared = numbers.map((n) => n * n);
print("Squared (arrow):", squared);


let transformed = numbers.map((x) => x * 3 + 1);
print("Transformed (x*3+1):", transformed);
print("");


print("--- FILTER with arrow functions ---");


let evens = numbers.filter((n) => n % 2 == 0);
print("Even numbers:", evens);


let greaterThan5 = numbers.filter((x) => x > 5);
print("Greater than 5:", greaterThan5);


let multiplesOf3 = numbers.filter((n) => n % 3 == 0);
print("Multiples of 3:", multiplesOf3);
print("");


print("--- REDUCE with arrow functions ---");


let sum = numbers.reduce((acc, n) => acc + n, 0);
print("Sum:", sum);


let product = numbers.reduce((acc, n) => acc * n, 1);
print("Product:", product);
print("");


print("--- FIND/SOME/EVERY with arrow functions ---");


let found = numbers.find((n) => n > 7);
print("First > 7:", found);


let hasEvens = numbers.some((n) => n % 2 == 0);
print("Has evens?", hasEvens);


let allPositive = numbers.every((n) => n > 0);
print("All positive?", allPositive);
print("");


print("--- METHOD CHAINING with arrow functions ---");


let chained = numbers
    .filter((n) => n % 2 == 0)
    .map((n) => n * 3)
    .filter((n) => n > 10);
print("Evens * 3, > 10:", chained);
print("");


print("=== ASYNC FUNCTIONS ===");


async fn fetchUser(id: int): str {
    return "User_" + id;
}


let userFuture = fetchUser(42);
print("Future:", userFuture);

let user = await userFuture;
print("User:", user);
print("");


print("=== ASYNC + ARROW FUNCTIONS ===");


async fn processUsers(ids: list): list {
    return ids.map((id) => "Processed_" + id);
}

let ids = [1, 2, 3, 4, 5];
let resultFuture = processUsers(ids);
let processed = await resultFuture;
print("Processed users:", processed);
print("");


print("=== HIGHER-ORDER FUNCTIONS ===");


fn double(x: int): int {
    return x * 2;
}

fn triple(x: int): int {
    return x * 3;
}


let myFunc: func = double;
let anotherFunc: func = triple;

let small = [1, 2, 3];
print("Original:", small);
print("Doubled with func type:", small.map(myFunc));
print("Tripled with func type:", small.map(anotherFunc));
print("Doubled:", small.map(double));
print("Tripled:", small.map(triple));
print("");

print("=== ALL TESTS COMPLETED ===");
