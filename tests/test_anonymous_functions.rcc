

print("=== ANONYMOUS FUNCTIONS TESTS ===\n")


print("Test 1: Simple anonymous function with block")
let add = fn(a: int, b: int) {
    let result = a + b
    return result
}
let sum = add(5, 3)
print("✓ add(5, 3) = " + sum + "\n")


print("Test 2: Anonymous function with parameters")
let multiply = fn(x: int, y: int) {
    return x * y
}
let prod = multiply(4, 5)
print("✓ multiply(4, 5) = " + prod + "\n")


print("Test 3: Anonymous function without parameters")
let greet = fn() {
    return "Hello, World!"
}
let greeting = greet()
print("✓ greet() = " + greeting + "\n")


print("Test 4: Anonymous function returning function")
let make_double = fn() {
    return fn(x: int) {
        return x * 2
    }
}
let double_fn = make_double()
let result = double_fn(10)
print("✓ make_double()(10) = " + result + "\n")


print("Test 5: Anonymous functions in data structure")
let operations = {
    add: fn(a: int, b: int) {
        return a + b
    },
    subtract: fn(a: int, b: int) {
        return a - b
    },
    multiply: fn(a: int, b: int) {
        return a * b
    }
}
let r1 = operations.add(10, 5)
let r2 = operations.subtract(10, 5)
let r3 = operations.multiply(10, 5)
print("✓ operations: add=" + r1 + ", subtract=" + r2 + ", multiply=" + r3 + "\n")


print("Test 6: Array of anonymous functions")
let functions = [
    fn(x: int) {
        return x * 2
    },
    fn(x: int) {
        return x + 10
    },
    fn(x: int) {
        return x - 5
    }
]
let f0 = functions[0](5)
let f1 = functions[1](5)
let f2 = functions[2](5)
print("✓ functions[0](5)=" + f0 + ", functions[1](5)=" + f1 + ", functions[2](5)=" + f2 + "\n")

print("=== ALL TESTS PASSED ===")
