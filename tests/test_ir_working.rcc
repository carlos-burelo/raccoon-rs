println("=== IR/VM Test (AST Compatible) ===");

// Basic variables
let x = 10;
let y = 20;
println("x + y = " + (x + y));

// Arrays
let arr = [1, 2, 3];
println("Array length: " + arr.length);

// Objects
let obj = { a: 100 };
println("obj.a = " + obj.a);

// If
if (x > 5) {
    println("x is greater than 5");
}

// While
let i = 0;
while (i < 2) {
    println("while: " + i);
    i = i + 1;
}

// For
for (let j = 0; j < 2; j = j + 1) {
    println("for: " + j);
}

// For-of (arrays)
let nums = [100, 200];
for (const n of nums) {
    println("for-of: " + n);
}

// Try-catch
try {
    let test = 42;
    println("try: " + test);
} catch (err) {
    println("catch: " + err);
} finally {
    println("finally executed");
}

// Template strings
let name = "World";
let msg = `Hello, ${name}!`;
println(msg);

// Spread in arrays
let arr1 = [1, 2];
let arr2 = [...arr1, 3, 4];
println("Spread array length: " + arr2.length);

println("=== Test Complete ===");
